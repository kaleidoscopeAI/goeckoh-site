       r.raise_for_status(); content = r.json().get("message", {}).get("content", "").strip()
       data = json.loads(content)
       if not all(k in data for k in ("k_scale", "rest_scale")): raise ValueError("Missing keys")
       return {"ok": True, "adjust": data, "raw": content}
  except Exception as e:
       return {"ok": False, "adjust": heuristic_adjust(metrics), "error": str(e)}

