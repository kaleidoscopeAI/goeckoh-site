"""Return a list of supported tags for each version specified in
`versions`.

:param version: a string version, of the form "33" or "32",
    or None. The version will be assumed to support our ABI.
:param platform: specify a list of platforms you want valid
    tags for, or None. If None, use the local system platform.
:param impl: specify the exact implementation you want valid
    tags for, or None. If None, use the local interpreter impl.
:param abis: specify a list of abis you want valid
    tags for, or None. If None, use the local interpreter abi.
"""
supported: List[Tag] = []

python_version: Optional[PythonVersion] = None
if version is not None:
    python_version = _get_python_version(version)

interpreter = _get_custom_interpreter(impl, version)

platforms = _expand_allowed_platforms(platforms)

is_cpython = (impl or interpreter_name()) == "cp"
if is_cpython:
    supported.extend(
        cpython_tags(
            python_version=python_version,
            abis=abis,
            platforms=platforms,
        )
    )
else:
    supported.extend(
        generic_tags(
            interpreter=interpreter,
            abis=abis,
            platforms=platforms,
        )
    )
supported.extend(
    compatible_tags(
        python_version=python_version,
        interpreter=interpreter,
        platforms=platforms,
    )
)

return supported


