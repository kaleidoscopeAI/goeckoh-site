path: Optional[str] = None
url: Optional[str] = None
if os.path.exists(location):  # Is a local path.
    url = path_to_url(location)
    path = location
elif location.startswith("file:"):  # A file: URL.
    url = location
    path = url_to_path(location)
elif is_url(location):
    url = location

if url is None:
    msg = (
        "Location '%s' is ignored: "
        "it is either a non-existing path or lacks a specific scheme."
    )
    logger.warning(msg, location)
    return (None, None)

if path is None:
    source: LinkSource = _RemoteFileSource(
        candidates_from_page=candidates_from_page,
        page_validator=page_validator,
        link=Link(url, cache_link_parsing=cache_link_parsing),
    )
    return (url, source)

if os.path.isdir(path):
    if expand_dir:
        source = _FlatDirectorySource(
            candidates_from_page=candidates_from_page,
            path=path,
            project_name=project_name,
        )
    else:
        source = _IndexDirectorySource(
            candidates_from_page=candidates_from_page,
            link=Link(url, cache_link_parsing=cache_link_parsing),
        )
    return (url, source)
elif os.path.isfile(path):
    source = _LocalFileSource(
        candidates_from_page=candidates_from_page,
        link=Link(url, cache_link_parsing=cache_link_parsing),
    )
    return (url, source)
logger.warning(
    "Location '%s' is ignored: it is neither a file nor a directory.",
    location,
)
return (url, None)


