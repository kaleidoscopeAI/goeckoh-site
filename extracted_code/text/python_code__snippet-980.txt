"""Declare that package 'packageName' is a namespace package"""

msg = (
    f"Deprecated call to `pkg_resources.declare_namespace({packageName!r})`.\n"
    "Implementing implicit namespace packages (as specified in PEP 420) "
    "is preferred to `pkg_resources.declare_namespace`. "
    "See https://setuptools.pypa.io/en/latest/references/"
    "keywords.html#keyword-namespace-packages"
)
warnings.warn(msg, DeprecationWarning, stacklevel=2)

_imp.acquire_lock()
try:
    if packageName in _namespace_packages:
        return

    path = sys.path
    parent, _, _ = packageName.rpartition('.')

    if parent:
        declare_namespace(parent)
        if parent not in _namespace_packages:
            __import__(parent)
        try:
            path = sys.modules[parent].__path__
        except AttributeError as e:
            raise TypeError("Not a package:", parent) from e

    # Track what packages are namespaces, so when new path items are added,
    # they can be updated
    _namespace_packages.setdefault(parent or None, []).append(packageName)
    _namespace_packages.setdefault(packageName, [])

    for path_item in path:
        # Ensure all the parent's path items are reflected in the child,
        # if they apply
        _handle_ns(packageName, path_item)

finally:
    _imp.release_lock()


