  with np.errstate(divide='ignore', invalid='ignore'):
      midi = 69.0 + 12.0 * np.log2(f / 440.0)
      midi[~np.isfinite(midi)] = -np.inf
  return midi

