if x.dtype == np.int16:
    return (x.astype(np.float32) / 32768.0).clip(-1.0, 1.0)
if x.dtype == np.int32:
    return (x.astype(np.float32) / 2147483648.0).clip(-1.0, 1.0)
if x.dtype == np.uint8:
    return ((x.astype(np.float32) - 128.0) / 128.0).clip(-1.0, 1.0)
return x.astype(np.float32).clip(-1.0, 1.0)

