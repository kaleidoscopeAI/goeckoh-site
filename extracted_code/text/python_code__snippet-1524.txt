"""Build wheels.

:return: The list of InstallRequirement that succeeded to build and
    the list of InstallRequirement that failed to build.
"""
if not requirements:
    return [], []

# Build the wheels.
logger.info(
    "Building wheels for collected packages: %s",
    ", ".join(req.name for req in requirements),  # type: ignore
)

with indent_log():
    build_successes, build_failures = [], []
    for req in requirements:
        assert req.name
        cache_dir = _get_cache_dir(req, wheel_cache)
        wheel_file = _build_one(
            req,
            cache_dir,
            verify,
            build_options,
            global_options,
            req.editable and req.permit_editable_wheels,
        )
        if wheel_file:
            # Record the download origin in the cache
            if req.download_info is not None:
                # download_info is guaranteed to be set because when we build an
                # InstallRequirement it has been through the preparer before, but
                # let's be cautious.
                wheel_cache.record_download_origin(cache_dir, req.download_info)
            # Update the link for this.
            req.link = Link(path_to_url(wheel_file))
            req.local_file_path = req.link.file_path
            assert req.link.is_wheel
            build_successes.append(req)
        else:
            build_failures.append(req)

# notify success/failure
if build_successes:
    logger.info(
        "Successfully built %s",
        " ".join([req.name for req in build_successes]),  # type: ignore
    )
if build_failures:
    logger.info(
        "Failed to build %s",
        " ".join([req.name for req in build_failures]),  # type: ignore
    )
# Return a list of requirements that failed to build
return build_successes, build_failures


