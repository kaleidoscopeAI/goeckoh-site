vec = np.zeros(dim, dtype=np.float32)
if not text: return vec
for tok in text.lower().split():
    h = hashlib.sha256(tok.encode("utf-8")).digest()
    idx = struct.unpack("Q", h[:8])[0] % dim
    sign = 1.0 if (struct.unpack("I", h[8:12])[0] % 2 == 0) else -1.0
    vec[idx] += sign
norm = np.linalg.norm(vec) + 1e-8
return vec / norm

