remote_version_str = state.get(current_time)
if remote_version_str is None:
    remote_version_str = get_remote_version()
    if remote_version_str is None:
        logger.debug("No remote pip version found")
        return None
    state.set(remote_version_str, current_time)

remote_version = parse_version(remote_version_str)
logger.debug("Remote version of pip: %s", remote_version)
logger.debug("Local version of pip:  %s", local_version)

pip_installed_by_pip = was_installed_by_pip("pip")
logger.debug("Was pip installed by pip? %s", pip_installed_by_pip)
if not pip_installed_by_pip:
    return None  # Only suggest upgrade if pip is installed by pip.

local_version_is_older = (
    local_version < remote_version
    and local_version.base_version != remote_version.base_version
)
if local_version_is_older:
    return UpgradePrompt(old=str(local_version), new=remote_version_str)

return None


