"""Returns True if the system can bind an IPv6 address."""
sock = None
has_ipv6 = False

# App Engine doesn't support IPV6 sockets and actually has a quota on the
# number of sockets that can be used, so just early out here instead of
# creating a socket needlessly.
# See https://github.com/urllib3/urllib3/issues/1446
if _appengine_environ.is_appengine_sandbox():
    return False

if socket.has_ipv6:
    # has_ipv6 returns true if cPython was compiled with IPv6 support.
    # It does not tell us if the system has IPv6 support enabled. To
    # determine that we must bind to an IPv6 address.
    # https://github.com/urllib3/urllib3/pull/611
    # https://bugs.python.org/issue658327
    try:
        sock = socket.socket(socket.AF_INET6)
        sock.bind((host, 0))
        has_ipv6 = True
    except Exception:
        pass

if sock:
    sock.close()
return has_ipv6


