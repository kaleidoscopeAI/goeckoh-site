"""
Format command arguments for display.
"""
# For HiddenText arguments, display the redacted form by calling str().
# Also, we don't apply str() to arguments that aren't HiddenText since
# this can trigger a UnicodeDecodeError in Python 2 if the argument
# has type unicode and includes a non-ascii character.  (The type
# checker doesn't ensure the annotations are correct in all cases.)
return " ".join(
    shlex.quote(str(arg)) if isinstance(arg, HiddenText) else shlex.quote(arg)
    for arg in args
)


