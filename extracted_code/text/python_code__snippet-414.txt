"""
Parse the given version string and return either a :class:`Version` object
or a :class:`LegacyVersion` object depending on if the given version is
a valid PEP 440 version or a legacy version.
"""
try:
    return Version(version)
except InvalidVersion:
    return LegacyVersion(version)


