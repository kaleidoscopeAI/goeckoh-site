"""
Analyze textures using statistical measures on pixel neighborhoods.
This is a simplified, self-developed version.
"""
try:
    img_array = np.array(image.convert('L'))  # Convert to grayscale
    patterns = []

    # Example statistical measures
    for i in range(1, img_array.shape[0] - 1):
        for j in range(1, img_array.shape[1] - 1):
            neighborhood = img_array[i-1:i+2, j-1:j+2]  # 3x3 neighborhood
            patterns.append({
                'type': 'texture',
                'mean': np.mean(neighborhood).item(), # Convert to python scalar
                'variance': np.var(neighborhood).item(),
                'entropy': self._calculate_entropy(neighborhood).item()
            })

    return patterns
except Exception as e:
    print(f"Error in _analyze_textures: {e}")
    return []

