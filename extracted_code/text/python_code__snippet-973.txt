"""Yield distributions accessible on a sys.path directory"""
path_item = _normalize_cached(path_item)

if _is_unpacked_egg(path_item):
    yield Distribution.from_filename(
        path_item,
        metadata=PathMetadata(path_item, os.path.join(path_item, 'EGG-INFO')),
    )
    return

entries = (os.path.join(path_item, child) for child in safe_listdir(path_item))

# scan for .egg and .egg-info in directory
for entry in sorted(entries):
    fullpath = os.path.join(path_item, entry)
    factory = dist_factory(path_item, entry, only)
    for dist in factory(fullpath):
        yield dist


