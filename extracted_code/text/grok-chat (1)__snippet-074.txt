ds_int = (entropy(states) - entropy(past)) / dt if past else 0
ds_env = random.gauss(0, 0.1)
term1 = ds_int - ds_env

mi = mutual_info(past, future)
h_x = entropy(states)
term2 = mi / (h_x + 1e-10) if h_x else 0

dn = n_copies / dt
term3 = dn / (len(states) + 1e-10)

l = 0.4 * term1 + 0.3 * term2 + 0.3 * term3
return (math.tanh(l) + 1) / 2  # Normalize 0-1

