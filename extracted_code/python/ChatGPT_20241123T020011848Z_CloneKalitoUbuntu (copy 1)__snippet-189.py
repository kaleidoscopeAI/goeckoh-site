This should resolve the circular import by decoupling the shared code. Let me know how this works out!

