* - accepts the nodes provider (function or data) and optional config
* - returns constructs array and an update function if you want to push updates manually
